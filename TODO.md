# 📋 프로젝트 개선 TODO

## 🧪 테스트

### 우선순위: 높음
- [ ] **테스트 프레임워크 설정**
  - [ ] Vitest 또는 Jest 설치 및 설정
  - [ ] 테스트 환경 구성 (`vitest.config.ts` 또는 `jest.config.js`)
  - [ ] 테스트 스크립트 추가 (`package.json`)

- [ ] **단위 테스트 작성**
  - [ ] `UserService` 테스트
    - [ ] 회원가입 성공 케이스
    - [ ] 이메일 중복 체크
    - [ ] 비밀번호 해싱 검증
  - [ ] `AuthService` 테스트
    - [ ] 로그인 성공/실패
    - [ ] 토큰 생성 및 검증
    - [ ] 리프레시 토큰 로직
  - [ ] `PostService` 테스트
    - [ ] CRUD 작업
    - [ ] 권한 검증 (소유자만 수정/삭제)

- [ ] **인프라 어댑터 테스트**
  - [ ] `MemoryUserRepo` 테스트
  - [ ] `PostgresUserRepo` 통합 테스트
  - [ ] `BcryptHasher` 테스트
  - [ ] `JwtSigner` 테스트

- [ ] **통합 테스트**
  - [ ] HTTP 라우트 테스트 (Fastify)
  - [ ] 인증 플로우 E2E 테스트
  - [ ] 게시글 CRUD E2E 테스트

---

## 🚨 에러 핸들링

### 우선순위: 높음
- [ ] **커스텀 에러 클래스 정의**
  - [ ] `DomainError` (비즈니스 로직 에러)
  - [ ] `ValidationError` (입력 검증 에러)
  - [ ] `NotFoundError` (리소스 없음)
  - [ ] `UnauthorizedError` (인증 실패)
  - [ ] `ForbiddenError` (권한 없음)

- [ ] **에러 응답 표준화**
  - [ ] 에러 응답 DTO 정의
  - [ ] HTTP 상태 코드 매핑
  - [ ] 에러 메시지 포맷 통일

- [ ] **에러 로깅**
  - [ ] 에러 발생 시 구조화된 로깅
  - [ ] 스택 트레이스 관리
  - [ ] 민감한 정보 필터링

---

## ⚙️ 환경 설정

### 우선순위: 중간
- [ ] **환경 변수 관리**
  - [ ] `.env.example` 파일 생성
  - [ ] 환경별 설정 파일 분리 (`.env.dev`, `.env.prod`, `.env.test`)
  - [ ] 환경 변수 검증 스키마 (Zod)

- [ ] **설정 관리 모듈**
  - [ ] `src/infra/config.ts` 생성
  - [ ] 타입 안전한 설정 로더
  - [ ] 기본값 설정

---

## 📊 로깅

### 우선순위: 중간
- [ ] **구조화된 로깅**
  - [ ] Pino 또는 Winston 도입
  - [ ] 로그 레벨 관리 (DEBUG, INFO, WARN, ERROR)
  - [ ] JSON 형식 로그 출력

- [ ] **HTTP 로깅 미들웨어**
  - [ ] 요청/응답 로깅
  - [ ] 요청 ID 추적
  - [ ] 성능 메트릭 (응답 시간)

---

## 💉 의존성 주입

### 우선순위: 낮음
- [ ] **DI 프레임워크 도입**
  - [ ] `tsyringe` 또는 `typedi` 선택 및 설치
  - [ ] 데코레이터 기반 의존성 주입
  - [ ] 컨테이너 설정 마이그레이션

---

## 🎯 도메인 로직 강화

### 우선순위: 중간
- [ ] **도메인 엔티티 메서드 추가**
  - [ ] `User` 엔티티에 비즈니스 규칙 메서드
  - [ ] `Post` 엔티티에 상태 변경 메서드

- [ ] **Value Objects 패턴**
  - [ ] `Email` Value Object
  - [ ] `Password` Value Object
  - [ ] `UUID` Value Object

- [ ] **도메인 이벤트**
  - [ ] 이벤트 인터페이스 정의
  - [ ] 이벤트 발행 메커니즘
  - [ ] 예: `UserCreatedEvent`, `PostPublishedEvent`

---

## 📖 API 문서 개선

### 우선순위: 낮음
- [ ] **응답 스키마 정의**
  - [ ] 모든 엔드포인트의 응답 DTO 정의
  - [ ] OpenAPI 스키마에 응답 추가

- [ ] **에러 응답 문서화**
  - [ ] 각 엔드포인트별 에러 케이스 문서화
  - [ ] 에러 코드 및 메시지 예시

- [ ] **예제 추가**
  - [ ] 요청/응답 예제 추가
  - [ ] cURL 예제 추가

---

## ⚡ 성능 최적화

### 우선순위: 중간
- [ ] **데이터베이스 쿼리 최적화**
  - [ ] N+1 쿼리 문제 해결
  - [ ] 인덱스 최적화
  - [ ] 쿼리 성능 분석

- [ ] **캐싱 전략**
  - [ ] Redis 도입
  - [ ] 사용자 정보 캐싱
  - [ ] 게시글 목록 캐싱

- [ ] **페이징 구현**
  - [ ] 게시글 목록 페이징
  - [ ] 커서 기반 페이지네이션

---

## 🔒 보안 강화

### 우선순위: 높음
- [ ] **Rate Limiting**
  - [ ] `@fastify/rate-limit` 도입
  - [ ] 로그인 엔드포인트 제한
  - [ ] API 엔드포인트별 제한 설정

- [ ] **CORS 설정**
  - [ ] 환경별 CORS 설정
  - [ ] 허용된 origin 관리

- [ ] **입력 Sanitization**
  - [ ] XSS 방지
  - [ ] SQL Injection 방지 (Prisma 사용으로 이미 대부분 방지됨)

- [ ] **보안 헤더**
  - [ ] Helmet.js 도입
  - [ ] 보안 헤더 설정

---

## 🚀 CI/CD

### 우선순위: 낮음
- [ ] **GitHub Actions 설정**
  - [ ] 테스트 자동 실행
  - [ ] 린트/포맷팅 체크
  - [ ] 빌드 검증

- [ ] **자동 배포**
  - [ ] 스테이징 환경 배포
  - [ ] 프로덕션 환경 배포
  - [ ] 롤백 전략

---

## 📦 기타 개선사항

### 우선순위: 낮음
- [ ] **코드 품질**
  - [ ] ESLint 규칙 강화
  - [ ] Prettier 설정 통일
  - [ ] TypeScript strict 모드 활성화

- [ ] **문서화**
  - [ ] 아키텍처 다이어그램 추가
  - [ ] 코드 주석 보완
  - [ ] 개발 가이드 작성

- [ ] **모니터링**
  - [ ] 헬스체크 엔드포인트 개선
  - [ ] 메트릭 수집 (Prometheus 등)
  - [ ] 알림 설정
